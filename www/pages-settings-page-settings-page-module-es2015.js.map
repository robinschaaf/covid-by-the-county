{"version":3,"sources":["./src/app/pages/settings-page/modal.page.html","./src/app/pages/settings-page/settings-page.page.html","./src/app/pages/settings-page/modal.page.ts","./src/app/pages/settings-page/settings-page.module.ts","./src/app/pages/settings-page/settings-page.page.scss","./src/app/pages/settings-page/settings-page.page.ts"],"names":[],"mappings":"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","file":"pages-settings-page-settings-page-module-es2015.js","sourcesContent":["export default \"\\n<ion-app>\\n  <ion-content class=\\\"transparent\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <h4 style=\\\"margin-top: 3px;\\\">Settings for {{county.county_name}}, {{county.state}}</h4>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"9\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\n          <ion-label class=\\\"\\\">\\n            <div class=\\\"text-color-primary ion-text-wrap\\\">\\n              <span class=\\\"font-light\\\">Number of Days to Display</span>\\n            </div>\\n          </ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"3\\\" class=\\\"ion-align-self-center\\\">\\n          <ion-select interface=\\\"popover\\\" [ngModel]=\\\"county.default_days\\\" multiple=\\\"false\\\" (ionChange)=\\\"onChangeCountyDefaultDays($event)\\\">\\n            <ion-select-option value=\\\"\\\">Use default</ion-select-option>\\n            <ion-select-option *ngFor=\\\"let i of allowedDays\\\" [value]=\\\"i\\\">{{i}}</ion-select-option>\\n          </ion-select>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"10\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\n          <ion-label class=\\\"\\\">\\n            <div class=\\\"text-color-primary ion-text-wrap\\\">\\n              <span class=\\\"font-light\\\">Send Push Notications</span>\\n            </div>\\n          </ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\" class=\\\"ion-align-self-center\\\">\\n          <ion-label class=\\\"\\\">\\n            <ion-toggle\\n              slot=\\\"end\\\"\\n              (ionChange)=\\\"onChangedPushEnabled($event)\\\"\\n              [checked]=\\\"county.enabled === 1\\\"\\n              style=\\\"right: 10px;\\\">\\n            </ion-toggle>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-content>\\n  <ion-footer class=\\\"ion-no-border ion-padding\\\">\\n    <ion-toolbar>\\n      <ion-button class=\\\"default-button box-shadow\\\" (click)=\\\"saveAndCloseModal()\\\" >Save</ion-button>\\n      <ion-button class=\\\"default-button box-shadow\\\" (click)=\\\"closeModal()\\\" color=\\\"light\\\">Cancel</ion-button>\\n      \\n    </ion-toolbar>\\n  </ion-footer>\\n</ion-app>\";","export default \"<!-- Intro Page -->\\r\\n<ion-app>\\r\\n  <ion-header class=\\\"box-shadow\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title class=\\\"ion-text-capitalize\\\">Settings</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <ion-content class=\\\"background-size\\\" style=\\\"background-image: url('39.jpg')\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row *ngIf=\\\"counties.length === 0\\\">\\r\\n        <ion-col size=\\\"12\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"ion-padding\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-bold\\\">No settings are available - please add some counties first!</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-row *ngIf=\\\"counties.length > 0\\\" style=\\\"padding-top: 24px; padding-bottom: 6px\\\">\\r\\n        <ion-col size=\\\"12\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-bold\\\">County Display and Notifications:</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-row *ngFor=\\\"let county of counties\\\">\\r\\n        <ion-col size=\\\"8\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-light\\\">{{county.county_name}}, {{county.state}}</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\" class=\\\"ion-align-self-center\\\">\\r\\n          <ion-label class=\\\"ion-float-right\\\" style=\\\"margin-right: 4px;\\\">\\r\\n            <ion-button fill=\\\"outline\\\" class=\\\"\\\" size=\\\"small\\\" (click)=\\\"openModal(county)\\\">\\r\\n              <!-- <ion-icon size=\\\"small\\\" name=\\\"pencil\\\" style=\\\"margin-right: 4px\\\"></ion-icon> -->\\r\\n              Update\\r\\n            </ion-button>\\r\\n            <!-- <ion-checkbox slot=\\\"end\\\" (ngModelChange)=\\\"updateUserCounty(county)\\\" [ngModel]=\\\"county.checkEnabled\\\"></ion-checkbox> -->\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row *ngIf=\\\"counties.length > 0\\\" style=\\\"padding-top: 24px; padding-bottom: 6px\\\">\\r\\n        <ion-col size=\\\"12\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-bold\\\">General Display Settings:</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"10\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-light\\\">Show Cases per 100k</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"2\\\" class=\\\"ion-align-self-center\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            \\r\\n            <ion-toggle\\r\\n              slot=\\\"end\\\"\\r\\n              (ionChange)=\\\"ionChangePerChecked($event)\\\"\\r\\n              [checked]=\\\"perChecked\\\"\\r\\n              style=\\\"right: 10px;\\\">\\r\\n            </ion-toggle>\\r\\n\\r\\n            <!-- <ion-checkbox slot=\\\"end\\\" (ionChange)=\\\"ionChangePerChecked($event)\\\" [(ngModel)]=\\\"perChecked\\\"></ion-checkbox> -->\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"10\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-light\\\">Show Death Counts</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"2\\\" class=\\\"ion-align-self-center\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            \\r\\n            <ion-toggle\\r\\n              slot=\\\"end\\\"\\r\\n              (ionChange)=\\\"ionChangeDeathsChecked($event)\\\"\\r\\n              [checked]=\\\"deathsChecked\\\"\\r\\n              style=\\\"right: 10px;\\\">\\r\\n            </ion-toggle>\\r\\n\\r\\n            <!-- <ion-checkbox slot=\\\"end\\\" (ionChange)=\\\"ionChangeDeathsChecked($event)\\\" [(ngModel)]=\\\"deathsChecked\\\"></ion-checkbox> -->\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"9\\\" class=\\\"ion-align-self-center ion-padding-start\\\">\\r\\n          <ion-label class=\\\"\\\">\\r\\n            <h2 class=\\\"text-size-md text-color-primary ion-text-wrap\\\">\\r\\n              <span class=\\\"font-light\\\">Number of Days to Display</span>\\r\\n            </h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"3\\\" class=\\\"ion-align-self-center\\\">\\r\\n          <ion-select interface=\\\"popover\\\" [(ngModel)]=\\\"defaultDays\\\" multiple=\\\"false\\\" (ionChange)=\\\"onChangeDefaultDays($event)\\\">\\r\\n            <ion-select-option *ngFor=\\\"let i of allowedDays\\\" [value]=\\\"i\\\">{{i}}\\r\\n            </ion-select-option>\\r\\n          </ion-select>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </ion-content>\\r\\n</ion-app>\\r\\n\";","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\n\nimport { Restangular } from 'ngx-restangular';\n\n@Component({\n  selector: 'app-county-modal',\n  templateUrl: 'modal.page.html',\n  styleUrls: ['settings-page.page.scss'],\n})\nexport class ModalPage implements OnInit{\n  @Input() county;\n  @Input() userId;\n  @Input() allowedDays = [];\n\n\n  constructor(public modalController: ModalController, private restangular: Restangular) {\n  }\n\n  ngOnInit(){\n  }\n\n  onChangedPushEnabled(event) {\n    this.county.enabled = this.county.enabled === 1 ? 0 : 1;\n  }\n\n  onChangeCountyDefaultDays(e) {\n    this.county.default_days = e.detail.value;\n  }\n\n  async saveAndCloseModal() {\n    this.county.put({\n      user_id: this.userId,\n      county_fips: this.county.county_fips,\n      enabled: this.county.enabled,\n      default_days: this.county.default_days})\n        .subscribe((r) =>{\n          this.closeModal();\n        })\n  }\n\n  async closeModal() {\n    await this.modalController.dismiss();\n  }\n}","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { ModalPage } from './modal.page';\nimport { SettingsPage } from './settings-page.page';\nimport { SharedModule } from '../../components/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    // IntroPageModule,\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: SettingsPage\n      }\n    ])\n  ],\n  declarations: [SettingsPage, ModalPage],\n  //entryComponents: [HomePage],\n  exports: [SettingsPage],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class SettingsPageModule { }\n","export default \"ion-row {\\n  border-bottom: solid .55px #C7C7CC;\\n}\\n\\n.updateButton {\\n  --border-radius: 6px;\\n  --padding-top: 0;\\n  --padding-start: 0.9em;\\n  --padding-end: 0.9em;\\n  --padding-bottom: 0;\\n  height: 2.1em;\\n  font-size: 13px;\\n}\\n\\n.updateButton [slot=start] {\\n  -webkit-margin-end: 4px !important;\\n          margin-inline-end: 4px !important;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2V0dGluZ3MtcGFnZS9zZXR0aW5ncy1wYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFnQjtFQUNoQixnQkFBYztFQUNkLHNCQUFnQjtFQUNoQixvQkFBYztFQUNkLG1CQUFpQjtFQUNqQixhQUFhO0VBQ2IsZUFBZTtBQUNqQjs7QUFSQTtFQVVJLGtDQUFpQztVQUFqQyxpQ0FBaUM7QUFFckMiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zZXR0aW5ncy1wYWdlL3NldHRpbmdzLXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXJvdyB7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIC41NXB4ICNDN0M3Q0M7XG59XG5cbi51cGRhdGVCdXR0b24ge1xuICAtLWJvcmRlci1yYWRpdXM6IDZweDtcbiAgLS1wYWRkaW5nLXRvcDogMDtcbiAgLS1wYWRkaW5nLXN0YXJ0OiAwLjllbTtcbiAgLS1wYWRkaW5nLWVuZDogMC45ZW07XG4gIC0tcGFkZGluZy1ib3R0b206IDA7XG4gIGhlaWdodDogMi4xZW07XG4gIGZvbnQtc2l6ZTogMTNweDtcblxuICBbc2xvdD1zdGFydF0ge1xuICAgIG1hcmdpbi1pbmxpbmUtZW5kOiA0cHggIWltcG9ydGFudDtcbiAgfVxufVxuIl19 */\";","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { Restangular } from 'ngx-restangular';\r\n\r\nimport { ToastService } from 'src/app/services/toast-service';\r\nimport { SettingsService } from './settings.service';\r\n\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ModalPage } from './modal.page';\r\n\r\nimport {groupBy, merge, uniq} from 'ramda';\r\n\r\n@Component({\r\n    templateUrl: 'settings-page.page.html',\r\n    styleUrls: ['settings-page.page.scss'],\r\n    providers: [],\r\n})\r\nexport class SettingsPage implements OnInit {\r\n    defaultSettings = {deathsChecked: true, perChecked: true, defaultDays: 10}; //TODO: if this is updated also update server!\r\n    settings = localStorage.getItem('_appSettings')\r\n      ? merge(this.defaultSettings, JSON.parse(localStorage.getItem('_appSettings')))\r\n      : this.defaultSettings;\r\n\r\n    deathsChecked = true;\r\n    perChecked = true;\r\n    defaultDays = this.settings.defaultDays;\r\n    allowedDays = [];\r\n    counties = localStorage.getItem('counties')\r\n      ? JSON.parse(localStorage.getItem('counties'))\r\n      : []\r\n    userId = localStorage.getItem('userId') || '';\r\n\r\n    constructor(\r\n        private settingsService: SettingsService,\r\n        private restangular: Restangular,\r\n        private toastCtrl: ToastService,\r\n        public navCtrl: NavController,\r\n        private modalController: ModalController) {\r\n          for(let i = 1; i < 90; i++) {\r\n            this.allowedDays.push(i);\r\n          }\r\n    }\r\n\r\n    ngOnInit() {\r\n      this.deathsChecked = this.settings.deathsChecked;\r\n      this.perChecked = this.settings.perChecked;\r\n      this.getUserCounties();\r\n    }\r\n\r\n    ionChangeDeathsChecked(event){\r\n      this.deathsChecked = !this.deathsChecked;\r\n      this.settings.deathsChecked = this.deathsChecked;\r\n      this.saveSettings();\r\n    }\r\n\r\n    ionChangePerChecked(event){\r\n      this.perChecked = !this.perChecked;\r\n      this.settings.perChecked = this.perChecked;\r\n      this.saveSettings();\r\n    }\r\n\r\n    onChangeDefaultDays(event) {\r\n      this.settings.defaultDays = this.defaultDays;\r\n      this.saveSettings();\r\n    }\r\n\r\n    getUserCounties() {\r\n      if(!this.userId) {\r\n        return\r\n      }\r\n      this.restangular.all('/userCounties').getList({userId: this.userId}).subscribe((co) => {\r\n        this.counties = co.map((c) => {\r\n          return merge(c, {checkEnabled: c.enabled === 1})\r\n        });\r\n      })\r\n    }\r\n\r\n    saveSettings() {\r\n      localStorage.setItem('_appSettings', JSON.stringify(this.settings))\r\n      this.settingsService.publishSettings(this.settings);\r\n\r\n      this.restangular.all('/updateUserSettings').post({user_id: this.userId, settings: JSON.stringify(this.settings)})\r\n        .subscribe((r) =>{\r\n          this.toastCtrl.presentToast('Settings have been updated', 2000);\r\n        })\r\n    }\r\n\r\n    async openModal(county) {\r\n      const modal = await this.modalController.create({\r\n          component: ModalPage,\r\n          componentProps: {\r\n            county,\r\n            userId: this.userId,\r\n            allowedDays: this.allowedDays\r\n          },\r\n          cssClass: 'larger-modal',\r\n          backdropDismiss: true\r\n        });\r\n      \r\n       modal.onDidDismiss().then(() => {\r\n        this.closeModal();\r\n       })\r\n       return await modal.present();\r\n    }\r\n  \r\n    closeModal() {\r\n      this.modalController.dismiss();\r\n      this.settingsService.publishSettings(this.settings);\r\n      this.toastCtrl.presentToast('Settings have been updated', 5000);\r\n    }\r\n}"],"sourceRoot":"webpack:///"}